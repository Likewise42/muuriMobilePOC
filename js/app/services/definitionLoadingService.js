"use strict";

define(['lib/rxjs', 'require', '../constants'], function (Rx, require, constants) {
  'use strict';

  var name = 'definitionLoadingService';
  var inject = ['gridCommunicationService'];

  function definitionLoadingService(gridCommunicationService) {
    var _this = this;

    var definitions = require.toURL('demo-dashboard-items.json');

    this.loadDefinitions = function (gridName) {
      _this.http.get(definitions).then(function (response) {
        return response.data.items;
      }).then(function (itemDefinitions) {
        gridCommunicationService.announce(gridName, constants.GRID_EVENTS.SOURCE_ITEMS_CHANGED, itemDefinitions);
      });
    };
  }

  definitionLoadingService.$inject = inject;
  definitionLoadingService.serviceName = name;
  return definitionLoadingService;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2h0bWwvanMvYXBwL3NlcnZpY2VzL2RlZmluaXRpb25Mb2FkaW5nU2VydmljZS5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCJSeCIsInJlcXVpcmUiLCJjb25zdGFudHMiLCJuYW1lIiwiaW5qZWN0IiwiZGVmaW5pdGlvbkxvYWRpbmdTZXJ2aWNlIiwiZ3JpZENvbW11bmljYXRpb25TZXJ2aWNlIiwiZGVmaW5pdGlvbnMiLCJ0b1VSTCIsImxvYWREZWZpbml0aW9ucyIsImdyaWROYW1lIiwiaHR0cCIsImdldCIsInRoZW4iLCJyZXNwb25zZSIsImRhdGEiLCJpdGVtcyIsIml0ZW1EZWZpbml0aW9ucyIsImFubm91bmNlIiwiR1JJRF9FVkVOVFMiLCJTT1VSQ0VfSVRFTVNfQ0hBTkdFRCIsIiRpbmplY3QiLCJzZXJ2aWNlTmFtZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsTUFBTSxDQUFDLENBQUMsVUFBRCxFQUFhLFNBQWIsRUFBd0IsY0FBeEIsQ0FBRCxFQUEwQyxVQUFVQyxFQUFWLEVBQWNDLE9BQWQsRUFBdUJDLFNBQXZCLEVBQWtDO0FBQzlFOztBQUVBLE1BQUlDLElBQUksR0FBRywwQkFBWDtBQUNBLE1BQUlDLE1BQU0sR0FBRyxDQUFDLDBCQUFELENBQWI7O0FBQ0EsV0FBU0Msd0JBQVQsQ0FBa0NDLHdCQUFsQyxFQUE0RDtBQUFBOztBQUN4RCxRQUFNQyxXQUFXLEdBQUdOLE9BQU8sQ0FBQ08sS0FBUixDQUFjLDJCQUFkLENBQXBCOztBQUdBLFNBQUtDLGVBQUwsR0FBdUIsVUFBQ0MsUUFBRCxFQUFjO0FBQ2pDLE1BQUEsS0FBSSxDQUFDQyxJQUFMLENBQVVDLEdBQVYsQ0FBY0wsV0FBZCxFQUNDTSxJQURELENBQ00sVUFBQUMsUUFBUTtBQUFBLGVBQUlBLFFBQVEsQ0FBQ0MsSUFBVCxDQUFjQyxLQUFsQjtBQUFBLE9BRGQsRUFFQ0gsSUFGRCxDQUVNLFVBQUFJLGVBQWUsRUFBSTtBQUNyQlgsUUFBQUEsd0JBQXdCLENBQUNZLFFBQXpCLENBQWtDUixRQUFsQyxFQUE0Q1IsU0FBUyxDQUFDaUIsV0FBVixDQUFzQkMsb0JBQWxFLEVBQXdGSCxlQUF4RjtBQUNILE9BSkQ7QUFLSCxLQU5EO0FBT0g7O0FBRURaLEVBQUFBLHdCQUF3QixDQUFDZ0IsT0FBekIsR0FBbUNqQixNQUFuQztBQUNBQyxFQUFBQSx3QkFBd0IsQ0FBQ2lCLFdBQXpCLEdBQXVDbkIsSUFBdkM7QUFDQSxTQUFPRSx3QkFBUDtBQUNILENBckJLLENBQU4iLCJzb3VyY2VzQ29udGVudCI6WyJkZWZpbmUoWydsaWIvcnhqcycsICdyZXF1aXJlJywgJy4uL2NvbnN0YW50cyddLCBmdW5jdGlvbiAoUngsIHJlcXVpcmUsIGNvbnN0YW50cykge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBuYW1lID0gJ2RlZmluaXRpb25Mb2FkaW5nU2VydmljZSc7XHJcbiAgICB2YXIgaW5qZWN0ID0gWydncmlkQ29tbXVuaWNhdGlvblNlcnZpY2UnXTtcclxuICAgIGZ1bmN0aW9uIGRlZmluaXRpb25Mb2FkaW5nU2VydmljZShncmlkQ29tbXVuaWNhdGlvblNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHJlcXVpcmUudG9VUkwoJ2RlbW8tZGFzaGJvYXJkLWl0ZW1zLmpzb24nKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMubG9hZERlZmluaXRpb25zID0gKGdyaWROYW1lKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaHR0cC5nZXQoZGVmaW5pdGlvbnMpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmRhdGEuaXRlbXMpXHJcbiAgICAgICAgICAgIC50aGVuKGl0ZW1EZWZpbml0aW9ucyA9PiB7XHJcbiAgICAgICAgICAgICAgICBncmlkQ29tbXVuaWNhdGlvblNlcnZpY2UuYW5ub3VuY2UoZ3JpZE5hbWUsIGNvbnN0YW50cy5HUklEX0VWRU5UUy5TT1VSQ0VfSVRFTVNfQ0hBTkdFRCwgaXRlbURlZmluaXRpb25zKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBkZWZpbml0aW9uTG9hZGluZ1NlcnZpY2UuJGluamVjdCA9IGluamVjdDtcclxuICAgIGRlZmluaXRpb25Mb2FkaW5nU2VydmljZS5zZXJ2aWNlTmFtZSA9IG5hbWU7XHJcbiAgICByZXR1cm4gZGVmaW5pdGlvbkxvYWRpbmdTZXJ2aWNlO1xyXG59KTsiXX0=
