"use strict";

define(['../../constants'], function (constants) {
  'use strict';

  var name = 'muuridemo.components.bulldozer.controller';
  var inject = ['bulldozerService', 'safeApply', '$scope', 'muuridemo.services.smartLog'];

  function Bulldozer(bulldozerService, safeApply, scope, log) {
    var self = this;
    self.gridType = constants.GRID_TYPES.SOURCE_GRID;
    self.display = bulldozerService.getDisplay();

    self.$onInit = function () {
      bulldozerService.instance = self;
      log.debug('Bulldozer component initialize with service:', bulldozerService);
      self.display = bulldozerService.display;
    };

    var unsubscribe = bulldozerService.subscribe(function (newDisplayValue) {
      safeApply(function () {
        self.display = newDisplayValue;
      }, scope);
    });

    self.$onDestroy = function () {
      unsubscribe();
    }; //for debug purposes


    self.hideButton = function () {
      bulldozerService.toggleDisplay();
    };
  }

  Bulldozer.$inject = inject;
  Bulldozer.controllerName = name;
  return Bulldozer;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2h0bWwvanMvYXBwL2NvbXBvbmVudHMvYnVsbGRvemVyL2J1bGxkb3plci5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImRlZmluZSIsImNvbnN0YW50cyIsIm5hbWUiLCJpbmplY3QiLCJCdWxsZG96ZXIiLCJidWxsZG96ZXJTZXJ2aWNlIiwic2FmZUFwcGx5Iiwic2NvcGUiLCJsb2ciLCJzZWxmIiwiZ3JpZFR5cGUiLCJHUklEX1RZUEVTIiwiU09VUkNFX0dSSUQiLCJkaXNwbGF5IiwiZ2V0RGlzcGxheSIsIiRvbkluaXQiLCJpbnN0YW5jZSIsImRlYnVnIiwidW5zdWJzY3JpYmUiLCJzdWJzY3JpYmUiLCJuZXdEaXNwbGF5VmFsdWUiLCIkb25EZXN0cm95IiwiaGlkZUJ1dHRvbiIsInRvZ2dsZURpc3BsYXkiLCIkaW5qZWN0IiwiY29udHJvbGxlck5hbWUiXSwibWFwcGluZ3MiOiI7O0FBQUFBLE1BQU0sQ0FBQyxDQUFDLGlCQUFELENBQUQsRUFBc0IsVUFBVUMsU0FBVixFQUFxQjtBQUM3Qzs7QUFFQSxNQUFJQyxJQUFJLEdBQUcsMkNBQVg7QUFDQSxNQUFJQyxNQUFNLEdBQUcsQ0FBQyxrQkFBRCxFQUFxQixXQUFyQixFQUFrQyxRQUFsQyxFQUE0Qyw2QkFBNUMsQ0FBYjs7QUFFQSxXQUFTQyxTQUFULENBQW9CQyxnQkFBcEIsRUFBc0NDLFNBQXRDLEVBQWlEQyxLQUFqRCxFQUF3REMsR0FBeEQsRUFBNkQ7QUFDekQsUUFBSUMsSUFBSSxHQUFHLElBQVg7QUFDQUEsSUFBQUEsSUFBSSxDQUFDQyxRQUFMLEdBQWdCVCxTQUFTLENBQUNVLFVBQVYsQ0FBcUJDLFdBQXJDO0FBQ0FILElBQUFBLElBQUksQ0FBQ0ksT0FBTCxHQUFlUixnQkFBZ0IsQ0FBQ1MsVUFBakIsRUFBZjs7QUFFQUwsSUFBQUEsSUFBSSxDQUFDTSxPQUFMLEdBQWUsWUFBWTtBQUN2QlYsTUFBQUEsZ0JBQWdCLENBQUNXLFFBQWpCLEdBQTRCUCxJQUE1QjtBQUNBRCxNQUFBQSxHQUFHLENBQUNTLEtBQUosQ0FBVSw4Q0FBVixFQUEwRFosZ0JBQTFEO0FBQ0FJLE1BQUFBLElBQUksQ0FBQ0ksT0FBTCxHQUFlUixnQkFBZ0IsQ0FBQ1EsT0FBaEM7QUFDSCxLQUpEOztBQU1BLFFBQUlLLFdBQVcsR0FBR2IsZ0JBQWdCLENBQUNjLFNBQWpCLENBQTJCLFVBQVNDLGVBQVQsRUFBMEI7QUFDbkVkLE1BQUFBLFNBQVMsQ0FBQyxZQUFVO0FBQ2hCRyxRQUFBQSxJQUFJLENBQUNJLE9BQUwsR0FBZU8sZUFBZjtBQUNILE9BRlEsRUFFTmIsS0FGTSxDQUFUO0FBR0gsS0FKaUIsQ0FBbEI7O0FBS0FFLElBQUFBLElBQUksQ0FBQ1ksVUFBTCxHQUFrQixZQUFVO0FBQ3hCSCxNQUFBQSxXQUFXO0FBQ2QsS0FGRCxDQWhCeUQsQ0FvQnpEOzs7QUFDQVQsSUFBQUEsSUFBSSxDQUFDYSxVQUFMLEdBQWtCLFlBQVk7QUFDMUJqQixNQUFBQSxnQkFBZ0IsQ0FBQ2tCLGFBQWpCO0FBQ0gsS0FGRDtBQUdIOztBQUVEbkIsRUFBQUEsU0FBUyxDQUFDb0IsT0FBVixHQUFvQnJCLE1BQXBCO0FBQ0FDLEVBQUFBLFNBQVMsQ0FBQ3FCLGNBQVYsR0FBMkJ2QixJQUEzQjtBQUNBLFNBQU9FLFNBQVA7QUFDSCxDQW5DSyxDQUFOIiwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFsnLi4vLi4vY29uc3RhbnRzJ10sIGZ1bmN0aW9uIChjb25zdGFudHMpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgbmFtZSA9ICdtdXVyaWRlbW8uY29tcG9uZW50cy5idWxsZG96ZXIuY29udHJvbGxlcic7XHJcbiAgICB2YXIgaW5qZWN0ID0gWydidWxsZG96ZXJTZXJ2aWNlJywgJ3NhZmVBcHBseScsICckc2NvcGUnLCAnbXV1cmlkZW1vLnNlcnZpY2VzLnNtYXJ0TG9nJ107XHJcblxyXG4gICAgZnVuY3Rpb24gQnVsbGRvemVyKCBidWxsZG96ZXJTZXJ2aWNlLCBzYWZlQXBwbHksIHNjb3BlLCBsb2cpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2VsZi5ncmlkVHlwZSA9IGNvbnN0YW50cy5HUklEX1RZUEVTLlNPVVJDRV9HUklEO1xyXG4gICAgICAgIHNlbGYuZGlzcGxheSA9IGJ1bGxkb3plclNlcnZpY2UuZ2V0RGlzcGxheSgpO1xyXG5cclxuICAgICAgICBzZWxmLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJ1bGxkb3plclNlcnZpY2UuaW5zdGFuY2UgPSBzZWxmO1xyXG4gICAgICAgICAgICBsb2cuZGVidWcoJ0J1bGxkb3plciBjb21wb25lbnQgaW5pdGlhbGl6ZSB3aXRoIHNlcnZpY2U6JywgYnVsbGRvemVyU2VydmljZSk7XHJcbiAgICAgICAgICAgIHNlbGYuZGlzcGxheSA9IGJ1bGxkb3plclNlcnZpY2UuZGlzcGxheTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgdW5zdWJzY3JpYmUgPSBidWxsZG96ZXJTZXJ2aWNlLnN1YnNjcmliZShmdW5jdGlvbihuZXdEaXNwbGF5VmFsdWUpIHtcclxuICAgICAgICAgICAgc2FmZUFwcGx5KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmRpc3BsYXkgPSBuZXdEaXNwbGF5VmFsdWU7XHJcbiAgICAgICAgICAgIH0sIHNjb3BlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZWxmLiRvbkRlc3Ryb3kgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vZm9yIGRlYnVnIHB1cnBvc2VzXHJcbiAgICAgICAgc2VsZi5oaWRlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBidWxsZG96ZXJTZXJ2aWNlLnRvZ2dsZURpc3BsYXkoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIEJ1bGxkb3plci4kaW5qZWN0ID0gaW5qZWN0O1xyXG4gICAgQnVsbGRvemVyLmNvbnRyb2xsZXJOYW1lID0gbmFtZTtcclxuICAgIHJldHVybiBCdWxsZG96ZXI7XHJcbn0pOyJdfQ==
